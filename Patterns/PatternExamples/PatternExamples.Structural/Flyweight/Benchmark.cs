using BenchmarkDotNet.Attributes;
using PatternExamples.Structural.Flyweight.With;
using PatternExamples.Structural.Flyweight.Without;

namespace PatternExamples.Structural.Flyweight;

[MemoryDiagnoser]
public class Benchmark
{
    [Benchmark]
    public void Flyweight()
    {
        var personFlyWeight = new PersonFlyweight( """
                                              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin ac nibh eu elit elementum accumsan. Ut purus mauris, euismod in consectetur ac, luctus id lorem. Vestibulum dapibus elit et mi volutpat fermentum. Nulla porta lacus ut lobortis accumsan. Curabitur ac sem ac neque vestibulum ornare ac in lectus. Fusce vel iaculis arcu. Aliquam varius massa eget ligula ornare consectetur. Etiam bibendum egestas felis, finibus blandit arcu tempor quis. Aliquam erat volutpat. Suspendisse in gravida risus, ullamcorper posuere elit. Pellentesque eget commodo nunc. Donec faucibus felis vitae euismod vulputate.

                                              Donec tempus, mi ac fringilla placerat, dui sem efficitur massa, non tristique est ante id elit. Aenean venenatis ex ac hendrerit vestibulum. Proin cursus tincidunt lorem, a aliquet leo rutrum id. Nullam id est tincidunt, cursus nulla eu, facilisis neque. Quisque ornare, libero ac congue aliquam, massa odio ultrices erat, ut laoreet neque arcu eget magna. Proin nec libero vulputate, hendrerit dolor eget, suscipit ex. Sed eros eros, bibendum ac urna vel, elementum pretium nulla.

                                              Ut metus lorem, convallis vitae dapibus sed, viverra ut sem. Vivamus euismod nisi justo, a vulputate ante ultrices vel. Suspendisse iaculis, mi nec elementum luctus, turpis nisi pretium erat, a suscipit lorem lectus quis massa. Quisque et ultrices justo. Nam eu tellus nec magna venenatis blandit a sed lorem. Sed eget tortor nec leo molestie hendrerit. Praesent bibendum placerat nulla id scelerisque. Interdum et malesuada fames ac ante ipsum primis in faucibus. Mauris faucibus odio nec vestibulum convallis. Nullam eu erat ante. Fusce mi lectus, pharetra vel tincidunt condimentum, convallis non neque. Nullam tempor tempus tellus vitae tempus. Sed ut lorem vel felis congue condimentum. Etiam ut erat sapien.

                                              Quisque rutrum lacus tempus velit consectetur, quis accumsan augue convallis. Ut nisi ligula, cursus sit amet mattis in, imperdiet vel tortor. Fusce fermentum lacus molestie elit convallis interdum. Fusce nec lectus at eros iaculis condimentum. Aliquam eu lacinia risus. Sed ex diam, laoreet at faucibus sit amet, consequat non nisl. Nulla varius, nulla non lacinia sodales, ligula felis tempor nisl, at fringilla orci massa id leo. Proin eget ante in erat vulputate imperdiet. Suspendisse mollis porta nibh, id pretium lectus. Cras in enim mauris. Nunc commodo elit gravida quam dictum finibus. Vivamus eu aliquam ante. Nam sodales lectus ut sollicitudin malesuada. Aliquam porta condimentum mauris, quis mattis enim eleifend eget. Nullam rhoncus, urna eu mollis accumsan, dui odio volutpat ligula, sit amet euismod sapien lacus quis sem. Maecenas nec scelerisque leo, ut blandit leo.

                                              Aliquam id sodales leo. Cras non nunc arcu. Nulla semper eleifend mi, id semper lorem elementum non. Curabitur quam odio, imperdiet eget libero ut, placerat mattis odio. Nam vitae velit a nibh porta interdum id in ipsum. In leo arcu, varius quis mauris in, commodo ullamcorper mi. In at est a ipsum ultrices cursus sed sed turpis. Pellentesque tincidunt odio at leo aliquet, ac aliquam nisl auctor. Vestibulum a velit at nisl eleifend imperdiet ut vel eros. Nam condimentum orci mi, non dapibus risus vulputate et. Sed eros risus, feugiat id purus vel, faucibus vestibulum tortor. Curabitur eu enim non massa pharetra tempor. Curabitur sapien orci, semper tincidunt congue a, venenatis blandit risus. Phasellus placerat nibh eu erat fringilla, nec convallis leo bibendum.

                                              Etiam faucibus feugiat ante, eget facilisis leo sodales quis. Pellentesque gravida velit erat, sed maximus nisi porta at. Vivamus non dui et orci tincidunt dictum. Maecenas nunc libero, iaculis nec pharetra a, porttitor a libero. Sed semper ligula pellentesque eros semper, nec ullamcorper est accumsan. Integer eget fringilla nulla. In imperdiet metus enim, vitae dapibus massa varius quis. Aenean mollis vehicula augue, non maximus ipsum feugiat et.

                                              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras suscipit varius elit, vel laoreet mauris luctus sed. Nulla luctus nisi tortor, sit amet tempor ex gravida vel. Donec pellentesque, enim ut aliquam lacinia, leo risus semper erat, condimentum bibendum massa augue et massa. Proin non bibendum augue. Pellentesque pharetra, diam sed consequat sollicitudin, massa purus ultrices sapien, et gravida velit neque ac risus. Pellentesque imperdiet condimentum turpis, viverra ornare urna lobortis id. Nam at porttitor tortor, id volutpat lacus. Vestibulum interdum, orci ut scelerisque imperdiet, lacus arcu ornare sapien, eu rutrum ante lorem id ante. Proin eu nisi odio. Praesent aliquam risus ligula, non accumsan lacus posuere a. Pellentesque porttitor sem et arcu gravida laoreet. Vestibulum cursus arcu neque, eget posuere magna pulvinar et. Praesent quis lectus ut mauris sollicitudin cursus eget ultricies magna. Vestibulum laoreet, augue ut sagittis feugiat, nisi mauris pellentesque metus, vel venenatis odio sapien nec erat. Aliquam in venenatis leo, congue pellentesque mi.

                                              Ut ut enim vulputate, facilisis turpis vitae, iaculis nisi. Nullam eget malesuada sapien, sed efficitur turpis. Sed aliquam urna at sagittis placerat. Curabitur sed mollis eros, in ornare libero. Suspendisse ut lorem eu sem lobortis eleifend. Mauris ac purus ipsum. Nam commodo fringilla lectus, sed lobortis velit vestibulum at. Vivamus in egestas arcu. Vivamus eget aliquam urna, a aliquam purus. Praesent faucibus mi consectetur sapien iaculis posuere. Nulla quis varius enim. Maecenas efficitur cursus orci, vitae vestibulum leo pellentesque iaculis. In eu enim sed nulla bibendum consectetur.

                                              Morbi augue justo, blandit sit amet iaculis ut, gravida et nisl. Sed malesuada volutpat mattis. Vestibulum eu ullamcorper libero. Nulla vel velit dapibus, sagittis elit vitae, mollis ipsum. Nunc eleifend semper ipsum, consequat cursus felis sodales eget. Mauris ipsum tellus, pretium hendrerit arcu non, mattis cursus nulla. Pellentesque sed nulla sed massa pulvinar sodales. Quisque vitae auctor mauris. Phasellus tempus ipsum at libero luctus, ut iaculis lacus venenatis. Suspendisse nulla magna, efficitur in mi a, rutrum gravida odio. Sed finibus turpis et augue congue, quis vulputate nisi pellentesque. Phasellus a est iaculis, pretium quam quis, tincidunt sem. Nulla facilisi. Quisque ac erat sit amet mi faucibus tristique.

                                              Duis et risus sollicitudin, elementum lacus ac, mattis lacus. Morbi sagittis ligula ut finibus tincidunt. Cras at nisl nisi. Donec pulvinar, neque at lobortis pretium, erat tellus faucibus ex, a fermentum est velit at augue. Quisque ut congue odio, quis sodales eros. Curabitur quis dictum tortor. Phasellus maximus viverra lectus at gravida. Maecenas non mi tellus. Nulla suscipit, ex in rhoncus sodales, velit lacus finibus nulla, eget aliquet est arcu consequat orci. Praesent gravida scelerisque ipsum, at elementum sapien accumsan eu. Vivamus eget imperdiet est. Praesent imperdiet nisl eu dolor lacinia, luctus eleifend mauris efficitur. Vestibulum euismod, turpis quis ullamcorper tempus, quam justo tempor eros, et maximus ex nisi non nunc.

                                              Donec urna turpis, cursus vitae massa vel, auctor congue elit. In imperdiet enim non nisl sagittis, quis ultrices metus cursus. Suspendisse vitae enim non dolor porta interdum ac quis velit. Vestibulum pulvinar fermentum risus sit amet finibus. Donec suscipit molestie odio ac volutpat. Aenean scelerisque ultricies nunc non blandit. Ut nec nibh id eros tristique pulvinar ut sed lectus.

                                              Morbi at orci ac leo consequat pulvinar. Nulla fermentum tellus leo, non congue massa efficitur nec. Aenean quis mollis mauris, sed pellentesque nisl. Aenean nec diam non ante euismod varius et a est. Curabitur tincidunt ultricies vestibulum. Donec fringilla nisi ac magna hendrerit, sed pretium nisi tincidunt. Aenean sit amet nibh leo. Nam dapibus luctus maximus. Ut interdum, ex vel venenatis vulputate, purus orci imperdiet ex, ut commodo ligula libero eget ex. Suspendisse potenti. Vivamus pulvinar cursus elementum. Nam et luctus nunc, sed porttitor libero. Aenean id semper orci. Praesent sed felis nisi.

                                              Nam sit amet facilisis nunc. Aliquam est lectus, tempus et augue accumsan, viverra fringilla nulla. Pellentesque id sollicitudin lacus. In libero purus, imperdiet eget turpis ut, mattis pretium leo. Fusce efficitur arcu id tortor consectetur, non consequat augue fermentum. Integer non metus lectus. Quisque eget mollis nunc. Pellentesque vulputate magna sit amet feugiat rhoncus. Vestibulum feugiat fermentum nunc, nec rutrum est condimentum in.

                                              Vivamus auctor venenatis neque, at tempor sapien tincidunt sit amet. Cras volutpat ligula ut justo imperdiet auctor. Phasellus lacus nibh, varius molestie faucibus interdum, varius eget nulla. Proin fringilla dignissim ante sed congue. Donec nec tristique sapien. Curabitur aliquet sapien sed diam mattis efficitur. Maecenas scelerisque magna vel risus aliquam sollicitudin. Proin quis felis velit. Etiam turpis purus, fermentum eu blandit eget, hendrerit sed nisl. Proin pulvinar fermentum tincidunt. Phasellus sed consequat leo. Interdum et malesuada fames ac ante ipsum primis in faucibus. Phasellus posuere nec turpis sit amet ultricies. Donec lorem nisl, iaculis et rhoncus vitae, eleifend eu arcu.

                                              Duis auctor mauris ac condimentum rhoncus. Praesent at sodales nisi. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce ultrices pulvinar ultricies. Ut scelerisque arcu metus, ut condimentum dolor eleifend ut. Suspendisse et eros non nibh volutpat molestie. Donec accumsan enim eu velit sollicitudin, nec ultricies metus tristique. Ut consequat sed metus eget gravida. Mauris placerat sem ultrices tincidunt porttitor. Duis et vestibulum orci, vel euismod justo. Curabitur eget purus sed orci condimentum pellentesque nec at ipsum. Donec eros ante, pellentesque non leo et, dictum porttitor odio. Donec ac elit cursus, lacinia massa id, venenatis orci. Duis porta, ex sed porta sodales, lacus nibh rutrum mi, eu aliquet purus mauris ac diam. Quisque ornare, eros sed pulvinar vestibulum, nunc purus egestas lorem, ac viverra metus lectus vitae leo.

                                              Vestibulum gravida, est et scelerisque convallis, lorem justo vestibulum ante, vel lacinia erat dolor ac ex. Quisque tempor venenatis blandit. Nulla et massa eu libero volutpat tincidunt et sit amet justo. Vestibulum pellentesque consectetur quam quis sodales. Ut ex dui, imperdiet ut semper id, accumsan id mi. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla facilisi. Sed accumsan vulputate enim. Proin arcu lorem, sagittis ut vestibulum a, pretium quis elit. Etiam sed mattis risus, ut hendrerit diam. Mauris lobortis sollicitudin vestibulum. In id urna id quam tempor interdum.

                                              Sed sagittis nibh ut viverra pulvinar. Aliquam id pulvinar risus. Etiam sollicitudin odio vitae urna scelerisque lacinia. Pellentesque finibus id felis vehicula faucibus. Fusce rutrum lectus at leo malesuada rutrum. Aenean non finibus orci. Aliquam finibus magna felis, eget suscipit nulla dignissim eu. Ut at elit mollis mauris semper tempus a non lorem. Aenean tempor urna ex, elementum sollicitudin tellus pellentesque in. Aliquam et convallis purus.

                                              Nulla et ante commodo, condimentum nisl ac, efficitur justo. Phasellus non consectetur ligula. Donec pharetra massa vitae pharetra porta. Suspendisse luctus molestie convallis. Nullam fermentum, nibh sed laoreet facilisis, turpis tortor accumsan nunc, faucibus vehicula leo elit ut arcu. Pellentesque et varius purus. Vivamus tempus, nunc ut malesuada ornare, mauris sapien vulputate augue, non auctor quam neque quis erat. Praesent suscipit posuere ante, ac auctor nibh mattis id.

                                              Donec nisl lectus, dapibus eu viverra eget, vehicula eget nisl. Mauris vitae gravida sapien. Proin malesuada consequat tellus, vitae luctus libero interdum eu. Maecenas non aliquet odio. Ut tincidunt imperdiet ipsum. Morbi non turpis feugiat quam vehicula aliquam non quis odio. Aenean nulla mi, blandit eu nunc eget, accumsan condimentum augue. Mauris vitae magna tortor. Ut quis ornare sapien. Sed accumsan tellus at tristique mollis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Curabitur condimentum diam felis, condimentum feugiat nunc mollis faucibus. Vivamus luctus ante ullamcorper lectus cursus laoreet. Nunc luctus aliquam lorem, quis mattis diam finibus in.

                                              Maecenas ultrices dolor quis eleifend laoreet. Phasellus luctus augue a nisi pharetra, sed eleifend odio iaculis. Proin non porttitor eros. Ut luctus velit vitae felis elementum, et lobortis felis hendrerit. Cras sollicitudin eget felis et ornare. Phasellus sed neque non augue aliquet pretium quis at urna. In tristique eleifend nunc condimentum bibendum.

                                              Curabitur eget porttitor enim, quis porta arcu. Praesent blandit odio id commodo ornare. Aenean placerat quis elit eu luctus. Fusce lacus tortor, tincidunt ac ante in, hendrerit fringilla enim. Aenean eu nisl felis. Aenean sed fermentum odio, id tristique sapien. Morbi hendrerit nulla non volutpat porta. In hac habitasse platea dictumst. Aliquam ullamcorper ipsum nec nibh lobortis lobortis. Nullam ullamcorper tellus vitae ex posuere, nec consectetur arcu hendrerit. Nullam tincidunt magna in lectus efficitur pellentesque. Ut commodo id mauris nec consectetur. Aliquam erat volutpat. Nulla facilisi.

                                              Donec euismod ante a lacus tincidunt, at suscipit sem tincidunt. Quisque ut elit ac enim consectetur efficitur. Vivamus convallis semper nunc, faucibus mattis dolor congue at. In fringilla nec enim sed euismod. Fusce volutpat, metus eu placerat tincidunt, neque odio mattis lectus, sit amet pulvinar ligula est nec arcu. Nulla auctor varius velit eu aliquam. Quisque eu pharetra urna, quis suscipit quam. Pellentesque sagittis elit in leo consectetur, quis viverra sem egestas. Morbi non dui at eros commodo tincidunt. Ut tincidunt tristique nulla, ac vehicula risus malesuada et.

                                              Nam vitae consectetur ligula, eu ultrices diam. Curabitur eu diam ac lacus pulvinar aliquam. Donec nulla ipsum, efficitur at bibendum quis, vestibulum eget est. Morbi venenatis eget lectus eu aliquam. Suspendisse mollis urna odio, a blandit est gravida ut. Sed augue nulla, placerat at mattis et, pharetra eleifend est. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Nulla facilisi.

                                              Ut et imperdiet neque, sed ultricies augue. Pellentesque eget tincidunt tellus. Nullam laoreet ex et mi consectetur congue. Maecenas eget lacinia justo. Vestibulum vehicula turpis diam, eu pharetra nibh efficitur sed. Maecenas interdum elementum rutrum. Proin a sollicitudin nibh. Praesent ac augue vitae quam mattis aliquam quis in felis. Curabitur condimentum libero ut eros gravida semper. Mauris egestas nulla eu enim pharetra, mattis volutpat quam egestas. Fusce a purus vel libero pharetra congue et id velit. Donec mauris lectus, posuere sit amet nunc vitae, lobortis suscipit ex. Etiam iaculis metus sed leo viverra aliquam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Ut hendrerit fringilla risus, sed molestie nibh volutpat luctus. Sed at pharetra libero, id viverra neque.

                                              Duis lacinia vel est eget faucibus. Mauris non pharetra erat, ut molestie nunc. Proin vitae sagittis metus, eu rhoncus elit. Suspendisse ligula mauris, mollis non justo eu, pharetra finibus lorem. Interdum et malesuada fames ac ante ipsum primis in faucibus. Etiam fringilla consequat ex, non varius mauris congue et. Etiam non augue ac erat molestie porttitor cursus quis quam. Praesent vel suscipit neque, at vulputate turpis. Proin ut hendrerit justo. Donec eget risus a sapien gravida tempus non non nisi. Interdum et malesuada fames ac ante ipsum primis in faucibus. In vel lacus ultricies, sodales velit vitae, pharetra tellus. In egestas efficitur pharetra. Sed lobortis commodo sem. In blandit nibh ac bibendum auctor. Phasellus a nisi leo.

                                              Aenean et velit tincidunt, euismod nisi a, auctor urna. Donec at urna aliquam, dapibus metus at, ultricies ex. Praesent sapien mauris, maximus eu imperdiet sollicitudin, sodales congue enim. Donec in quam libero. Phasellus congue, lacus et tempus tincidunt, tortor nisi bibendum ante, et lacinia lacus nunc vel nulla. Curabitur semper convallis imperdiet. Cras vitae mauris sed sapien pharetra porttitor ut et enim. Curabitur elementum finibus lectus eget scelerisque.

                                              Aenean massa neque, efficitur id facilisis in, auctor id est. Nunc mauris orci, ultrices vitae volutpat eu, feugiat eu ligula. Mauris sit amet pellentesque ligula. Sed imperdiet, libero id accumsan dignissim, velit elit porttitor tortor, in laoreet dolor elit quis justo. Vivamus elementum in ex et molestie. Aliquam non sapien erat. Praesent convallis ex non ipsum tincidunt, accumsan dapibus mi mollis. Nam lacus tellus, consequat a purus quis, facilisis efficitur nisl. Duis gravida ultrices feugiat. Proin dapibus aliquet auctor. Phasellus lectus velit, cursus sollicitudin posuere eu, volutpat ac augue. Vivamus a libero porta, lobortis leo in, dictum magna.

                                              Suspendisse sem ex, lobortis a diam at, sodales ullamcorper ante. Integer iaculis massa id urna congue, quis sagittis lacus egestas. Sed efficitur risus lacinia malesuada vehicula. Praesent mollis dictum rutrum. Ut nec mauris vitae magna dictum tempus. Donec sit amet metus ante. Ut lacinia elementum purus. In maximus tortor lorem, sit amet pellentesque felis cursus nec. Maecenas venenatis neque non enim facilisis, vitae sagittis justo congue. Curabitur sed erat ullamcorper, fermentum tellus vitae, ultricies augue.

                                              Sed dignissim convallis eros, nec luctus quam volutpat nec. Cras luctus nibh eget dolor convallis eleifend. Nulla facilisi. Nulla lacus lacus, viverra in augue vitae, pharetra tristique libero. Nunc hendrerit a erat sed aliquet. Maecenas blandit urna ac mi consectetur feugiat. Nam tellus dolor, ullamcorper nec facilisis egestas, eleifend scelerisque turpis. Fusce id risus viverra, ultricies metus sed, dignissim ex. Ut sollicitudin dolor at nulla ultrices efficitur. Donec ullamcorper sem dapibus, mollis eros eu, facilisis sem. Integer gravida massa eu elit finibus sodales. Sed tortor felis, sodales imperdiet felis vel, vulputate tincidunt ex. Mauris suscipit massa nec elementum faucibus. Nulla vel tristique magna, quis laoreet augue. Maecenas ac ligula eget enim iaculis hendrerit.

                                              Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque ac dui metus. Nam tempus eros maximus risus tristique, eget tristique neque pharetra. Nulla facilisi. Cras molestie sem a ante tristique lacinia. Etiam sit amet porttitor nulla, in tristique eros. Suspendisse lacinia, lorem at pretium consectetur, velit eros vestibulum tortor, et ornare diam mi sed risus. Cras in nulla sit amet metus feugiat faucibus et quis libero. Donec molestie, ligula ac consectetur scelerisque, turpis erat pharetra dolor, vitae facilisis massa ipsum nec sapien. Aenean interdum rutrum malesuada. Aliquam et malesuada felis.

                                              Vivamus iaculis, orci eget ultricies mattis, lorem sapien ultrices nulla, a varius sapien massa hendrerit metus. Aliquam a lacus faucibus, tempor ipsum ac, condimentum ligula. In mattis, eros sed bibendum sagittis, felis dolor dapibus lorem, non dictum lacus lectus vel nunc. Fusce in vehicula mi, id sollicitudin eros. In quis venenatis felis, et cursus diam. Morbi justo enim, maximus ac sem id, elementum vestibulum justo. Aliquam tempus dui in elementum iaculis. Phasellus vel ornare ligula. Nullam ut ex quam. Cras et suscipit massa, interdum suscipit felis.

                                              Maecenas ut mi non purus eleifend iaculis nec ac ipsum. Fusce fringilla cursus dignissim. Cras sed mi auctor, iaculis dui sit amet, rutrum diam. Mauris ut augue accumsan, maximus magna ut, sagittis odio. Duis elementum eget lacus at fermentum. Phasellus pellentesque volutpat rutrum. Proin maximus nunc sed enim efficitur egestas. Nullam commodo lacus ac nisi vehicula tempor. Etiam egestas ultrices magna at porttitor. Aliquam nec ligula purus.

                                              Praesent ut risus sit amet turpis maximus mollis in eu nisl. Donec eget diam congue, ultricies diam a, mattis neque. Integer at ante massa. Donec scelerisque arcu id cursus commodo. Praesent ut massa ornare, egestas sapien non, mollis risus. Morbi quis erat ultricies libero laoreet scelerisque. Etiam ullamcorper magna ante, nec varius tortor condimentum non. Nunc tempor mi dolor, eu feugiat quam lacinia ac. Sed ut ultricies eros. Morbi dapibus convallis justo vitae consequat. Donec velit eros, tempor convallis tempor ac, facilisis ut tortor. Ut quis faucibus turpis. Suspendisse ultricies sodales turpis, at convallis urna pretium sit amet. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Morbi sed tincidunt quam.

                                              Nulla a faucibus metus, eget varius nunc. Interdum et malesuada fames ac ante ipsum primis in faucibus. Cras nec ultrices dolor. Quisque id feugiat odio, eu rutrum lorem. Proin rutrum laoreet urna, in viverra quam vehicula a. Ut vitae odio.
                                              """);

        for (var i = 0; i < 1000; i++)
        {
            var personContext = new Context(personFlyWeight, $"Pesron{i}", 20);
        }
    }

    [Benchmark]
    public void Normal()
    {
        for (var i = 0; i < 1000; i++)
        {
            var person = new Person
            {
                Name = $"Pesron{i}",
                Age = 20
            };
        }
    }
}